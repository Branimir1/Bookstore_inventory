<!-- add_book.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/stylesheets/style.css"> 
    <title><%= book ? 'Update Book' : 'Add New Book' %></title>
</head>
<body class="add-book-body">
    <!-- Include the sidebar -->
    <%- include('sidebar.ejs') %>
    <!-- <form action="/new-book" method="post">
        <h1>Add New Book</h1> -->
    <form action="<%= book ? '/update-book/' + book._id : '/new-book' %>" method="post">
        <h1><%= book ? 'Update Book' : 'Add New Book' %></h1>
        <label for="author">Author:</label>
        <!-- <input type="text" id="author" name="author" required><br> -->
        <input type="text" id="author" name="author" value="<%= book ? book.author : '' %>" required><br>
        
        <label for="country">Country:</label>
        <!-- <input type="text" id="country" name="country" required><br> -->
        <input type="text" id="country" name="country" value="<%= book ? book.country : '' %>" required><br>

        
        <label for="imageLink">Image Link:</label>
        <!-- <input type="text" id="imageLink" name="imageLink" required><br> -->
        <input type="text" id="imageLink" name="imageLink" value="<%= book ? book.imageLink : '' %>" required><br>

        
        <label for="language">Language:</label>
        <select id="language" name="language" required>
            <option value="">Select a language</option>
            <% languages.forEach(language => { %>
                <option value="<%= language %>" <%= book && book.language === language ? 'selected' : '' %>><%= language %></option>
            <% }); %>        
            <!-- <option value="English">English</option>
            <option value="French">French</option>
            <option value="Italian">Italian</option>
            <option value="German">German</option>
            <option value="Spanish">Spanish</option>
            <option value="Greek">Greek</option>
            <option value="Portuguese">Portuguese</option>
            <option value="Japanese">Japanese</option> -->
          </select><br>
        
        <label for="link">Link:</label>
        <!-- <input type="text" id="link" name="link" required><br> -->
        <input type="text" id="link" name="link" value="<%= book ? book.link : '' %>" required><br>
        
        
        <label for="pages">Pages:</label>
        <!-- <input type="number" id="pages" name="pages" required><br> -->
        <input type="number" id="pages" name="pages" value="<%= book ? book.pages : '' %>" required><br>
        
        <label for="title">Title:</label>
        <!-- <input type="text" id="title" name="title" required><br> -->
        <input type="text" id="title" name="title" value="<%= book ? book.title : '' %>" required><br>
        
        <label for="year">Year:</label>
        <!-- <input type="number" id="year" name="year" required><br> -->
        <input type="number" id="year" name="year" value="<%= book ? book.year : '' %>" required><br>
        <!--
        <button type="submit">Submit</button>
          -->
    </form>

    <button class="update-book" onclick="toggleConfirmation()"><strong>Update</button>
    
    <div id="updateConfirmation" style="display: none;">
        <p class="confirmation-text">Are you sure?</p>
        <input type="password" id="admin-password" 
        placeholder="Enter admin password">
    </div>  

    <script>

        function toggleConfirmation() {
            var confirmationDiv = document.getElementById("updateConfirmation");
            if (confirmationDiv.style.display === "none") {
                confirmationDiv.style.display = "block";
            } else {
                confirmationDiv.style.display = "none";
            }
        }
    
        //     // Submit the form
        //     document.querySelector('form').submit();
        // });

   
    </script>
</body>
</html>
